(this.webpackJsonppoemandtravel=this.webpackJsonppoemandtravel||[]).push([[1],{114:function(e,t,a){e.exports={Root:"Viewport_Root__1PgeP",Content:"Viewport_Content__KR8aF"}},119:function(e,t,a){"use strict";var n=a(25),r=a(0),c=a.n(r),o=a(66);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=function(e){o.a.set(Object(n.a)({page:e},t)),o.a.pageview(e)};return function(t){return Object(r.useEffect)((function(){a(t.location.pathname)}),[t.location.pathname]),c.a.createElement(e,t)}}},120:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(83),r=a(25),c=function(e,t,a){return e.reduce((function(e,c){return Object(r.a)({},e,Object(n.a)({},c[t],a?c[a]:c))}),{})}},171:function(e,t,a){e.exports=a.p+"static/media/icon-404.d36999d0.png"},172:function(e,t,a){e.exports=a.p+"static/media/pika.78b8f1db.gif"},173:function(e,t,a){e.exports=a.p+"static/media/pika120.3e6b4123.gif"},174:function(e,t,a){e.exports={Container:"LoadingPika_Container__2BjSs"}},181:function(e,t,a){e.exports=a(588)},27:function(e,t,a){e.exports={List:"MenuDrawer_List__3yQ3r",ListItem:"MenuDrawer_ListItem__3UJKL",Add:"MenuDrawer_Add__3aFNp"}},35:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return o}));var n="AUTH_START",r="AUTH_SUCCESS",c="AUTH_FAILURE",o="AUTH_LOGOUT"},49:function(e,t,a){e.exports={MenuButton:"MenuAppBar_MenuButton__3MRXR",NavLink:"MenuAppBar_NavLink__1LzI6",Login:"MenuAppBar_Login__16Z-W"}},50:function(e,t,a){e.exports={Container:"PageNotFound_Container__U_F_4",Icon:"PageNotFound_Icon__1RUHA",Text:"PageNotFound_Text__1prsV",Text2:"PageNotFound_Text2__2gHej",Back:"PageNotFound_Back__1zT84",Link:"PageNotFound_Link__1Xf1V"}},584:function(e,t,a){},588:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),i=a(19),s=(a(186),a(625)),u=a(624),l=a(42),m=a(162),d=a(74),p=a(59),h=a(66),g=a(73),f=a(25),b=a(35),E=a(87),v=Object(l.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fetching:!1,isAuthenticated:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.c:return Object(f.a)({},e,{fetching:t.fetching,isAuthenticated:t.isAuthenticated});case b.d:return Object(f.a)({},e,{fetching:t.fetching,user:t.user,userData:t.userData,isAuthenticated:t.isAuthenticated});case b.a:return Object(f.a)({},e,{fetching:t.fetching,errorMessage:t.errorMessage,isAuthenticated:t.isAuthenticated});case b.b:return Object(f.a)({},e,{isAuthenticated:t.isAuthenticated,user:t.user});default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fetching:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.b:return Object(f.a)({},e,{postsData:void 0,fetching:t.fetching});case E.c:return Object(f.a)({},e,{fetching:t.fetching,postsData:t.postsData});case E.a:return Object(f.a)({},e,{fetching:t.fetching,errorMessage:t.errorMessage});default:return e}}}),_=(a(584),a(68)),y=a(69),A=a(71),O=a(70),N=a(72),w=a(28),S=function(e){function t(){return Object(_.a)(this,t),Object(A.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(y.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),t}(r.a.Component),j=Object(w.g)(S),k=a(77),x=a(88),C=a.n(x),D=a(170),L=a(617),T=a(619),B=a(91),I=a(620),U=a(113),F=a.n(U),P=a(65),M=a.n(P),R=a(49),H=a.n(R),z=Object(D.a)((function(e){return{root:{flexGrow:1,zIndex:99,position:"sticky",top:0,left:0,right:0},appbar:{boxShadow:"0 1px 0 #EBEBEB"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,fontWeight:700}}}));function V(e){var t=z(),a=C()(M.a.Link,H.a.NavLink),n=e.userData&&e.userData.given_name&&"\u4f60\u597d ".concat(e.userData.given_name,",");return r.a.createElement("div",{className:t.root},r.a.createElement(L.a,{position:"static",classes:{root:t.appbar}},r.a.createElement(T.a,null,r.a.createElement(I.a,{onClick:e.toggleDrawer,edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(F.a,null)),r.a.createElement(B.a,{variant:"h6",className:t.title},r.a.createElement(i.c,{to:"/",className:M.a.Link},"\u4e00\u8fb9\u5199\u8bd7\u4e00\u8fb9\u65c5\u884c")),r.a.createElement(i.c,{to:"/add-post",className:a,activeClassName:H.a.Active},"\u6dfb\u52a0\u6587\u7ae0"),e.isAuth?r.a.createElement(i.c,{to:"/logout",className:"".concat(a," ").concat(H.a.Login),activeClassName:H.a.Active},n," \u767b\u51fa"):r.a.createElement(i.c,{to:"/login",className:"".concat(a," ").concat(H.a.Login)},"\u767b\u9646"),r.a.createElement(I.a,{className:H.a.MenuButton,color:"inherit","aria-label":"Menu",onClick:e.toggleDrawer},r.a.createElement(F.a,null)))))}var W=a(626),K=a(622),X=a(621),G=a(627),J=a(623),Q=a(27),Z=a.n(Q);function $(e){var t=C()(M.a.Link,Z.a.NavLink);return r.a.createElement(W.a,{open:e.open,onClose:e.toggleDrawer},r.a.createElement("div",{tabIndex:0,role:"button",onClick:e.toggleDrawer,onKeyDown:e.toggleDrawer},r.a.createElement("div",{className:Z.a.List},r.a.createElement(X.a,null,r.a.createElement(i.b,{to:"/",className:t},r.a.createElement(G.a,null,r.a.createElement("img",{className:Z.a.LogoImg,src:"/apple-icon-180x180.png",alt:"Powerfora",width:"52px",height:"52px"}))),r.a.createElement(K.a,null),r.a.createElement(i.b,{to:"/search",className:t},r.a.createElement(G.a,{button:!0,className:Z.a.ListItem},r.a.createElement(J.a,{primary:"\u641c\u7d22",className:Z.a.linkText}))),r.a.createElement(i.b,{to:"/add-post",className:t},r.a.createElement(G.a,{button:!0,className:Z.a.ListItem},r.a.createElement("div",{className:"".concat(Z.a.linkText," ").concat(Z.a.Add)},"\u6dfb\u52a0\u6587\u7ae0",r.a.createElement("span",{style:{fontFamily:g.a.typography.english}},"beta")))),e.isAuth?r.a.createElement(i.b,{to:"/logout",className:t},r.a.createElement(G.a,{button:!0,className:Z.a.ListItem},r.a.createElement(J.a,{primary:"\u767b\u51fa",className:Z.a.linkText}))):r.a.createElement(i.b,{to:"/login",className:t},r.a.createElement(G.a,{button:!0,className:Z.a.ListItem},r.a.createElement(J.a,{primary:"\u767b\u9646",className:Z.a.linkText})))))))}var q=function(){return r.a.createElement(w.a,{to:"/search"})},Y=a(171),ee=a.n(Y),te=a(50),ae=a.n(te),ne=function(){return r.a.createElement("div",{className:ae.a.Container},r.a.createElement("img",{src:ee.a,alt:"not found",className:ae.a.Icon}),r.a.createElement("h1",{className:ae.a.Text},"Powerfora under construction"),r.a.createElement("div",{className:ae.a.Text2},"Come back a few months later..."),r.a.createElement(i.c,{to:"/",className:ae.a.Link},r.a.createElement("div",{className:ae.a.Back},"Back to Home")))},re=a(172),ce=a.n(re),oe=a(173),ie=a.n(oe),se=a(174),ue=a.n(se);function le(){return r.a.createElement("div",{className:ue.a.Container},r.a.createElement("img",{src:window.isMobile?ie.a:ce.a,alt:"loading"}))}var me=a(119),de=a(120),pe=a(114),he=a.n(pe),ge=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(6)]).then(a.bind(null,833))})),fe=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(7)]).then(a.bind(null,835))})),be=Object(n.lazy)((function(){return a.e(10).then(a.bind(null,836))})),Ee=Object(n.lazy)((function(){return Promise.all([a.e(8),a.e(9)]).then(a.bind(null,837))})),ve=Object(n.lazy)((function(){return Promise.all([a.e(4),a.e(5)]).then(a.bind(null,844))})),_e=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(A.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={drawerOpen:!1,showSignUpModal:!1,showInviteBanner:!1,showBroadcastBanner:!1,broadcastMessage:void 0},a.authCheckState=function(){var e=a.props,t=e.authStart,n=e.authSuccess,r=e.authFailure;t(),p.a.currentAuthenticatedUser().then((function(e){var t=e.getSignInUserSession(),a=!1;if(t){var c=t.getIdToken().decodePayload();c["cognito:groups"]&&(a=c["cognito:groups"].includes("admin"))}e.getUserData((function(t,c){if(c){var o=Object(de.a)(c.UserAttributes,"Name","Value");o.isAdmin=a,n(e,o)}else r(t)}))})).catch((function(e){r(e)}))},a.toggleDrawer=function(){a.setState((function(e){return{drawerOpen:!e.drawerOpen}}))},a}return Object(N.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.authCheckState()}},{key:"render",value:function(){var e=this.state.drawerOpen,t=this.props,a=t.isAuthenticated,c=t.userData;return r.a.createElement(j,null,r.a.createElement("div",{className:he.a.Root},r.a.createElement($,{open:e,toggleDrawer:this.toggleDrawer,isAuth:a}),r.a.createElement(V,{toggleDrawer:this.toggleDrawer,isAuth:a,userData:c}),r.a.createElement("div",{className:he.a.Content},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",{style:{height:"100vh"}},r.a.createElement(le,null))},r.a.createElement(w.d,null,r.a.createElement(w.b,{exact:!0,path:"/",component:q}),r.a.createElement(w.b,{exact:!0,path:"/search",component:ve}),r.a.createElement(w.b,{exact:!0,path:"/signup",render:function(e){return r.a.createElement(fe,{isAuthenticated:a})}}),r.a.createElement(w.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(ge,{isAuthenticated:a})}}),r.a.createElement(w.b,{exact:!0,path:"/logout",component:Object(me.a)(be)}),r.a.createElement(w.b,{exact:!0,path:"/add-post",render:function(e){return r.a.createElement(Ee,{isAuthenticated:a,isAdmin:!!c&&!!c.isAdmin})}}),r.a.createElement(w.b,{component:ne}))))))}}]),t}(n.Component),ye=Object(d.b)((function(e){var t=e.auth;return{isAuthenticated:t.isAuthenticated,userData:t.userData}}),(function(e){return{authStart:function(){return e(Object(k.c)())},authSuccess:function(t,a){return e(Object(k.d)(t,a))},authFailure:function(t){return e(Object(k.a)(t))}}}))(_e);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));p.c.configure({Auth:{region:"ap-northeast-1",userPoolId:"ap-northeast-1_UOeburBv4",userPoolWebClientId:"2rm04ttfehk06m7mo6o4k2uon1",mandatorySignIn:!1,authenticationFlowType:"USER_PASSWORD_AUTH"}}),p.b.setLanguage("en"),p.b.putVocabularies({en:{Username:"Email","Enter your username":"\u90ae\u7bb1","Sign in to your account":"\u767b\u9646","Create a new account":"\u6ce8\u518c","Sign In":"\u767b\u9646","No Account?":"\u6ca1\u6709\u8d26\u53f7?","Create Account":"\u6ce8\u518c","Forget your password?":"\u5fd8\u8bb0\u5bc6\u7801\u4e86\uff1f"}}),Object(h.c)("UA-38451886-14",{debug:!1,titleCase:!1,gaOptions:{cookieDomain:"none"}}),window.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent);var Ae=[m.a];var Oe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,Ne=Object(l.e)(v,Oe(l.a.apply(void 0,Ae)));o.a.render(r.a.createElement(u.a,{theme:g.b},r.a.createElement(s.a,null,r.a.createElement(d.a,{store:Ne},r.a.createElement(i.a,{basename:"/"},r.a.createElement(ye,null))))),document.getElementById("poemandtravel-app")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},65:function(e,t,a){e.exports={Link:"theme_Link__1Oh1U"}},73:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(115),r=Object(n.a)({palette:{primary:{main:"#E2F0F8"},secondary:{main:"#50B3DE",light:"#dcdcdc",contrastText:"#ffcc00"},text:{primary:"#252525",secondary:"#979797"}},typography:{fontFamily:["Noto Serif SC","Nunito","-apple-system","BlinkMacSystemFont",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}),c={palette:{primary:{main:"#E2F0F8"},secondary:{main:"#50B3DE",light:"#dcdcdc",contrastText:"#ffcc00"},text:{primary:"#252525",secondary:"#979797"},purple:"#181ec1"},typography:{fontFamily:["Noto Serif SC","-apple-system","BlinkMacSystemFont",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),english:["Nunito","-apple-system","BlinkMacSystemFont",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}};t.b=r},77:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return i}));var n=a(35);function r(){return{type:n.c,fetching:!0,isAuthenticated:!1}}function c(e,t){return{type:n.d,fetching:!1,user:e,userData:t,isAuthenticated:!0}}function o(e){return{type:n.a,fetching:!1,errorMessage:e,isAuthenticated:!1}}function i(){return{type:n.b,isAuthenticated:!1,user:null}}},87:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return c}));var n="FETCH_POSTS_START",r="FETCH_POSTS_SUCCESS",c="FETCH_POSTS_FAILURE"},99:function(e,t){}},[[181,2,3]]]);
//# sourceMappingURL=main.e36edcec.chunk.js.map